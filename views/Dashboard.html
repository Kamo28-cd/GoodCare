
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Dashboard | GoodCare GoodHair</title>
<link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css"/>
<link rel="stylesheet" type="text/css" href="assets/css/font-awesome.min.css"/>
<link rel="stylesheet" type="text/css" href="assets/css/line-awesome.min.css"/>
<link rel="stylesheet" type="text/css" href="assets/css/simple-line-icons.css"/>
<link rel="stylesheet" type="text/css" href="assets/css/animate.css"/>
<link rel="stylesheet" type="text/css" href="assets/css/dashboardstyles.css"/>
<link rel="stylesheet" type="text/css" href="assets/css/croppie.css"/>
<link rel="stylesheet" type="text/css" href="assets/css/owl.carousel.css"/>
<link rel="stylesheet" type="text/css" href="assets/css/owl.theme.css"/>
<link rel="stylesheet" type="text/css" href="assets/css/owl.transitions.css"/>
<link rel="stylesheet" type="text/css" href="assets/css/dashboardalert.css"/>
<script src="https://cdn.ckeditor.com/4.16.2/standard/ckeditor.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<link href='https://fonts.googleapis.com/css?family=Work+Sans:400,100,200,300,500,600,800,900' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Oleo+Script+Swash+Caps:400,700' rel='stylesheet' type='text/css'>
<script src="assets/js/jquery-3.4.1.slim.js"></script>
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/moment.js"></script>

<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      
	
    <![endif]-->

</head>

<body>
	<input name="nav-toggle" type="checkbox" id="nav-toggle">
	<div class="sidebar">
		<div class="sidebar-brand">
			<h2><img src="assets/img/logo-white.png"> <span>Coral Blog Manager</span></h2>
		</div>

		<div class="sidebar-menu">
			<ul>
				<li>
					<div data-tab="1">
						<span class="las la-igloo">
							
						</span>
						<span>Blog Posts</span>
					</div>
				</li>
				<li>
					<div data-tab="2">
						<span class="las la-shopping-bag">
							
						</span>
						<span>Orders</span>
					</div>
				</li>
				<li>
					<div data-tab="3">
						<span class="las la-receipt">
							
						</span>
						<span>Products</span>
					</div>
				</li>
				<li>
					<div data-tab="4">
						<span class="las la-user-circle">
							
						</span>
						<span>Accounts</span>
					</div>
				</li>
				<li>
					<a href="signout" data-tab="5">
						<span class="las la-clipboard-list">
							
						</span>
						<span>Logout</span>
					</a>
				</li>
				
			</ul>
		</div>

	</div>

	<div class="main-content">
		<header>
			<h2>
				<label for="nav-toggle">
					<span class="las la-bars"></span>
				</label>

				Dashboard
			</h2>

			

			<div class="user-wrapper">
				<img src="assets/images/logo.png" width="40px" height="40px" alt="" />
				<div id="user_info">
					
				</div>
			</div>
		</header>

		<main class="main-body">
			<div class="cards">
				<div class="card-single">
					<div>
						<h1>56</h1>
						<span>Customers</span>
					</div>
					<div>
						<span class="las la-users"></span>
					</div>
				</div>
				<div class="card-single">
					<div>
						<h1>79</h1>
						<span>Projects</span>
					</div>
					<div>
						<span class="las la-clipboard-list"></span>
					</div>
				</div>
				<div class="card-single">
					<div>
						<h1>128</h1>
						<span>Orders</span>
					</div>
					<div>
						<span class="las la-shopping-bag"></span>
					</div>
				</div>
				<div class="card-single">
					<div>
						<h1>R28k</h1>
						<span>Income</span>
					</div>
					<div>
						<span class="lab la-google-wallet"></span>
					</div>
				</div>
			</div>
			

			<div class="recent-grid">
				<div class="projects"> 
				<div class="card">
					<div class="card-header">
						<h2>Recent Projects</h2>
						<button>See all <span class="las la-arrow-right"></span></button>
					</div>
					<div class="card-body">
						<div class="table-responsive">
						<table width="100%">
							<thead>
							<tr>
								<td>Project Title</td>
								<td>Department</td>
								<td>Status</td>
								
							</tr>
							</thead>
							<tbody>
								<tr>
									<td>UI/UX Design</td>
									<td>UI Team</td>
									<td>
										<span class="status purple"></span>
										review

									</td>
								</tr>
								<tr>
									<td>Web Development</td>
									<td>Frontend</td>
									<td>
										<span class="status pink"></span>
										in progress

									</td>
								</tr>
								<tr>
									<td>Ushop app</td>
									<td>Mobile Team</td>
									<td>
										<span class="status orange"></span>
										pending

									</td>
								</tr>
								<tr>
									<td>UI/UX Design</td>
									<td>UI Team</td>
									<td>
										<span class="status purple"></span>
										review

									</td>
								</tr>
								<tr>
									<td>Web Development</td>
									<td>Frontend</td>
									<td>
										<span class="status pink"></span>
										in progress

									</td>
								</tr>
								<tr>
									<td>Ushop app</td>
									<td>Mobile Team</td>
									<td>
										<span class="status orange"></span>
										pending

									</td>
								</tr>
							</tbody>
						</table>
						</div>
					</div>
				</div>
			</div>
			
			<div class="customers">
				<div class="card">
					<div class="card-header">
						<h3>New client</h3>

						<button>See all <span class="las la-arrow-right"></span></button>

					</div>

					<div class="card-body">
						<div class="customer">
							<div class="info">
								<img src="img/3.jpg" width="40px" height="40px" alt="">

								<div>
									<h4>Diana Prince</h4>

									<small>Princess of Themyscria</small>
								</div>
							</div>
						
						<div class="contact">
							<span class="las la-user-circle"></span>
							<span class="las la-comment"></span>
							<span class="las la-phone"></span>
						</div>
						</div>
						<div class="customer">
							<div class="info">
								<img src="img/3.jpg" width="40px" height="40px" alt="">

								<div>
									<h4>Diana Prince</h4>

									<small>Princess of Themyscria</small>
								</div>
							</div>
						
						<div class="contact">
							<span class="las la-user-circle"></span>
							<span class="las la-comment"></span>
							<span class="las la-phone"></span>
						</div>
						</div>
						<div class="customer">
							<div class="info">
								<img src="img/3.jpg" width="40px" height="40px" alt="">

								<div>
									<h4>Diana Prince</h4>

									<small>Princess of Themyscria</small>
								</div>
							</div>
						
						<div class="contact">
							<span class="las la-user-circle"></span>
							<span class="las la-comment"></span>
							<span class="las la-phone"></span>
						</div>
						</div>
						<div class="customer">
							<div class="info">
								<img src="img/3.jpg" width="40px" height="40px" alt="">

								<div>
									<h4>Diana Prince</h4>

									<small>Princess of Themyscria</small>
								</div>
							</div>
						
						<div class="contact">
							<span class="las la-user-circle"></span>
							<span class="las la-comment"></span>
							<span class="las la-phone"></span>
						</div>
						</div>
						<div class="customer">
							<div class="info">
								<img src="img/3.jpg" width="40px" height="40px" alt="">

								<div>
									<h4>Diana Prince</h4>

									<small>Princess of Themyscria</small>
								</div>
							</div>
						
						<div class="contact">
							<span class="las la-user-circle"></span>
							<span class="las la-comment"></span>
							<span class="las la-phone"></span>
						</div>
						</div>
						
					</div>
				</div>
			
			</div>

			
		</div>
		</main>
	</div>


<!-- Modal Background start-->
<div id="mymodal-bg" class="bg-mymodal" style="display:none">




<!--**************** Start of Crop Image ****************-->
        <div class="cm-block">
		<div class="center s-11 round-edges agile_book_form cm-inner-block animate" id="small-dialog-images" style="display: none;">
			
		</div>
	</div>
<!--**************** End of Crop Image ****************-->
<!--**************** Start of Text Dialog ****************-->
        <div class="cm-block">
		<div class="center s-11 round-edges agile_book_form cm-inner-block animate" id="small-dialog-text" style="display: none;">
			
		</div>
	</div>
<!--**************** End of Text Dialog ****************-->

<!--**************** Start of Prompt Dialog ****************-->
<div class="slide-block  center round-edges agile_book_form cm-inner-block" id="prompt-dialog" style="z-index:100;display: none;">
	<div class="prompt-container">
		<div class="prompt-dialog">
			<i class="fa fa-times-circle-o"></i>
			<h4>Are you sure?</h4>
			<span>Do you really want to delete this item? This cannot be reversed</span>
		</div>
		<div class="prompt-btns">
			
			<button class="prompt-btn prompt-btn-cancel" id="cancel">Cancel</button>
			<button class="prompt-btn prompt-btn-confirm" id="confirm">Delete</button>
		</div>	
		
	</div>
</div>

<!--**************** End of Prompt Dialog ****************-->
<!-- Start of toast notifications-->
<div class="alert dash_b" style="margin-top:0px !important;">
	<span class="fa fa-exclamation-circle"></span> 
	<span class="msg-a">Warning: This is a warning alert!</span>
	
	

</div>

<div class="alert-success dash_b" style="margin-top:0px !important;">
	<span class="fa fa-check-circle"></span> 
	<span class="msg-a-success">Success: You've completed this action</span>
	
	

</div>
<!-- End of toast notifications-->


</div>
<!-- Modal Background end-->


<script src="assets/js/dashboardalert.js"></script>
<script src="assets/js/edit.js"></script>
<script src="assets/js/croppie.js"></script>
<script>
	
	
$(document).ready(function() {

		//get url params start
		$.urlParam = function(name, url) {
			if (!url) {
				url = window.location.href;
			}
			var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(url);
			if (!results) {
				return undefined;
			}
			return results[1] || undefined;
		
			//to call if url is xyz.com/index.html?lang=en
			//then to call just go:
			// var langval = $.urlParam('lang');
		}

		//get url params end

		//substring function start (word shortening) 
		function substringFunction(body, length) {
			bodystring = ''+body+'';
                        stringlength = length;
                        trimmedBodyString = bodystring.length > stringlength ? bodystring.substring(0, stringlength -3) +"...": bodystring;
                        if (bodystring.length >stringlength){
                               bodystring = trimmedBodyString;

                        }
			return bodystring;
		}			
		
		//substring function end


		
		

		$.ajax({
			type:"GET",
			cache:false,
			url:"api/users",
			processData:false,
			contentType:"application/json",
			data: '',
			success: function(r) {
				r = JSON.parse(r)
				USERID = r.id;
				USERNAME = r.username;
				FIRSTNAME = r.firstname;
				LASTNAME = r.lastname;
				EMAIL = r.email;
				ACCTYPE = r.acctype;
				document.getElementById('user_info').innerHTML = `
					<h4>${r.firstname} ${r.lastname}</h4>
					<small>${r.acctype} </small>`;
				
			},
			error: function(r) {
				console.log(r)
			}
		});
		//****create post function start 
		$(document).on('click','.cms-addPost', function() {
			
			openSmallDialogText()
			CKEDITOR.replace( 'newpostbody' );
			$(document).on('click','.cms-imgUpload', function() {
				
				if ($('#newposttitle').val().length > 1) {
					$('#small-dialog-text').fadeOut('slow')
  					img_Type = $(this).attr('data-u');
					setTimeout(function() {
						newPostBody = $('#newpostbody').val()
						openSmallDialog(newPostBody)
						
						cropImage(''+img_Type+'');
					},1000)
				} else {
					message = 'Error: Please fill in all available fields';
					type = 'error'
					//alertFunction(type, message)
				}
			});
		
		});
		$(document).on('click', '#close-croppie', function() {
			$('#mymodal-bg').fadeOut('slow');
			$('#small-dialog-images').fadeOut('slow');
		})
		$(document).on('click', '#close-croppie-text', function() {
			$('#mymodal-bg').fadeOut('slow');
			$('#small-dialog-text').fadeOut('slow');
		})
		
		//****create post function end 
		

        //****add product function start
        $(document).on('click','.cms-AddProductText', function() {
			type="add-product";
            openSmallDialogText(type)
			$(document).on('change','#newvariation', function() {
				productVar = $('#newvariation').val()
				variationCont = document.querySelector('.variation-container')
				variationCont.innerHTML = ``
				
				if (productVar == 'size') {
					variationCont.innerHTML = `
					<div class="var-input-price-container">
						<input class="var-input" required/>
						<input class="var-input-price" type="number" required/>
					</div>
					<div class="var-input-price-container">
						<input class="var-input" required/>
						<input class="var-input-price" type="number" required/>
					</div>
					<div class="var-input-price-container">
						<input class="var-input" required/>
						<input class="var-input-price" type="number" required/>
					</div>
					`
					$('#view-variation').fadeIn('slow')

					$(document).on('click', '.change-size', function(sizeEvent) {
						if (sizeEvent.target.id == 'add-size') {
							input = document.createElement('input');
							variationCont.innerHTML += `<div class="var-input-price-container">
										<input class="var-input" required/>
										<input class="var-input-price" type="number" required/>
									</div> `
							//variationCont.appendChild(input)
						} else if (sizeEvent.target.id == 'remove-size') {
							varLength = variationCont.children.length -1
							
							variationCont.removeChild(variationCont.children[varLength])
						}
					})

					$(document).on('click', '.cms-imgUpload', function() {
						varInput = document.querySelectorAll('.var-input')
						varInputPrice = document.querySelectorAll('.var-input-price')
						const inputObj = []
						const inputPriceObj = []
						cnt = 0
						varInput.forEach(input => {
							
							if (input.value.length > 0 && input.value != ' ') {
								//console.log(input.value)
								const inputObjmin = {varInput: ""+input.value+""}
								cnt += 1
								
								inputObj.push(inputObjmin)

							}
							
						})

						varInputPrice.forEach(inputPrice => {
							
							if (inputPrice.value.length > 0 && inputPrice.value != ' ') {
								//console.log(input.value)
								const inputPricemin = {varInputPrice: inputPrice.value}
								cnt += 1
								
								inputPriceObj.push(inputPricemin)

							}
							
						})
						//console.log(inputObj)
						if ($('#newproductdescription').val().length > 20 && $('#newproductname').val().length > 2) {
							$('#small-dialog-text').fadeOut('slow')
  							img_Type = $(this).attr('data-u');
							setTimeout(function() {
								newPostBody = $('#newpostbody').val()
								openSmallDialog(newPostBody)
								
								cropImage(''+img_Type+'', inputObj, inputPriceObj);
							},1000)
						} else if ($('#newproductdescription').val().length < 20) {
							$('#small-dialog-text').fadeOut('slow')
							setTimeout(function() {
								message = 'Error: Please note description must be more than 20 characters long. Your description is currently '+$('#newproductdescription').val().length+' characters long';
								type = 'error'
								closeModal = 'no'
								//console.log(message)
								alertFunction(type, message, closeModal)
								setTimeout(function() {
									$('#small-dialog-text').fadeIn('slow')
								}, 2500)
							},1000)
							
							
						} else {
							message = 'Error: Please fill in all available fields';
							type = 'error'
							//console.log(message)
							alertFunction(type, message)
						}
					})
				} else if (productVar == 'color') {
					variationCont.innerHTML = `
					<div class="var-input-price-container">
						
						<input class="var-input-price" type="color"  required/>
					</div>
					<div class="var-input-price-container">
						
						<input class="var-input-price" type="color"  required/>
					</div>
					<div class="var-input-price-container">
						
						<input class="var-input-price" type="color" required/>
					</div>
					`
					$('#view-variation').fadeIn('slow')

					$(document).on('click', '.change-size', function(sizeEvent) {
						if (sizeEvent.target.id == 'add-size') {
							input = document.createElement('input');
							variationCont.innerHTML += `<div class="var-input-price-container">
										
										<input class="var-input-price" type="color" required/>
									</div> `
							//variationCont.appendChild(input)
						} else if (sizeEvent.target.id == 'remove-size') {
							varLength = variationCont.children.length -1
							
							variationCont.removeChild(variationCont.children[varLength])
						}
					})

					$(document).on('click', '.cms-imgUpload', function() {
						varInput = document.querySelectorAll('.var-input-price')
						
						const inputObj = []
						const inputPriceObj = []
						cnt = 0
						varInput.forEach(input => {
							
							if (input.value.length > 0 && input.value != ' ') {
								//console.log(input.value)
								const inputObjmin = {varInput: ""+input.value+""}
								cnt += 1
								
								inputObj.push(inputObjmin)

							}
							
						})

						//console.log(inputObj)
						if ($('#newproductdescription').val().length > 20 && $('#newproductname').val().length > 2) {
							$('#small-dialog-text').fadeOut('slow')
  							img_Type = $(this).attr('data-u');
							setTimeout(function() {
								newPostBody = $('#newpostbody').val()
								openSmallDialog(newPostBody)
								
								cropImage(''+img_Type+'', inputObj, inputPriceObj);
							},1000)
						} else if ($('#newproductdescription').val().length < 20) {
							$('#small-dialog-text').fadeOut('slow')
							setTimeout(function() {
								message = 'Error: Please note description must be more than 20 characters long. Your description is currently '+$('#newproductdescription').val().length+' characters long';
								type = 'error'
								closeModal = 'no'
								//console.log(message)
								alertFunction(type, message, closeModal)
								setTimeout(function() {
									$('#small-dialog-text').fadeIn('slow')
								}, 2500)
							},1000)
							
							
						} else {
							message = 'Error: Please fill in all available fields';
							type = 'error'
							//console.log(message)
							alertFunction(type, message)
						}
					})
				}
			})

            
            /*$(document).on('click','.cms-imgUpload', function() {

				if ($('#newproductname').val().length > 1) {
					$('#small-dialog-text').fadeOut('slow')
  					img_Type = $(this).attr('data-u');
					setTimeout(function() {
						newPostBody = $('#newpostbody').val()
						openSmallDialog(newPostBody)
						
						cropImage(''+img_Type+'');
					},1000)
				} else {
					message = 'Error: Please fill in all available fields';
					type = 'error'
					//alertFunction(type, message)
				}
                //img_Type = $(this).attr('data-u');
                
                //openSmallDialog()
                //cropImage(''+img_Type+'');
            })*/

        })


        //****add product function end



		//****delete function start 
		$(document).on('click', '[data-deleteId]', function() {
			deleteId = $(this).attr('data-deleteId')
			deleteType = $(this).attr('data-type')
			$('#mymodal-bg').fadeIn('slow')
			$('#prompt-dialog').fadeIn('slow')
			$(document).on('click', '.prompt-btn', function(event) {
				
				if (event.target == document.getElementById('confirm')) {
					$('#prompt-dialog').fadeOut('slow');
					setTimeout(function() {
						$.ajax({
							type:"POST",
							cache:false,
							url:"api/blogdelete?id="+deleteId+"&type="+deleteType,
							processData:false,
							contentType:"application/json",
							data: '',
							success: function(r) {
								
								r = JSON.parse(r);
								
								type = 'success';
								response = r.Success;
								alertFunction(type,'Success:'+response+'')
								setTimeout(function() {
									sortFunction($.urlParam('sort'))
								},2000)
							},
							error: function(r) {
								r = JSON.parse(r.responseText);
								type = 'error';
								response = r.Error;
								alertFunction(type,'Error:'+response+'')
							}
						});
					},1200)
					
				} else if (event.target == document.getElementById('cancel')) {
					$('#mymodal-bg').fadeOut('slow')
					$('#prompt-dialog').fadeOut('slow')
				} 
				
			})
			
			
		})

		
		//****delete function end

		//****toggle function start
		
		
		$(document).on('click', '.toggle-switch', function(toggleEvent) {
			toggleId = $(this).attr('data-toggleId');
			toggleType = $(this).attr('data-type');
			//console.log(toggleEvent.target.previousElementSibling)
		
			//console.log(document.getElementById('toggle-btn'+toggleId+''))
			if (toggleEvent.target.previousElementSibling == document.getElementById('toggle-btn'+toggleId+'')) {
				if (document.getElementById('toggle-btn'+toggleId+'').checked) {
					//if its already checked you try to update it using the instock variable and change it to no (or unchecked) 
					let inStock = 'no';
					//console.log('changing to '+inStock)

					$.ajax({
						type:"POST",
						cache:false,
						url:"api/toggle?id="+toggleId+"&type="+toggleType+"&instock="+inStock,
						processData:false,
						contentType:"application/json",
						data: '',
						success: function(r) {
							//console.log(r)
						},
						error: function(r) {
							console.log(r)
						}
					})	
				} else if (!document.getElementById('toggle-btn'+toggleId+'').checked) {
					let inStock = 'yes';
					//console.log('changing to '+inStock)
					$.ajax({
						type:"POST",
						cache:false,
						url:"api/toggle?id="+toggleId+"&type="+toggleType+"&instock="+inStock,
						processData:false,
						contentType:"application/json",
						data: '',
						success: function(r) {
							console.log(r)
						},
						error: function(r) {
							console.log(r)
						}
					})
				}

				
			} 
			
			
			
			
			
		})
		//****toggle function end
		
		sortFunction($.urlParam('sort'))

		//****sort function start
		function sortFunction(type, e) {
			if (typeof type == 'undefined') {
				//*** change paramaters start
				typeId = 1
				const urlNew = new URLSearchParams(window.location.search);
				urlNew.set('sort', typeId)
				window.history.pushState('{}', null, '?sort='+typeId+'')
				//*** change paramaters end
			}
			type = type || 1
			e = e || false;
			


			if (type == '1') {
			//*********BLOG POSTS START
			
			
			let sortParam = $.urlParam('sort');
			
			$('[data-tab='+type+']').addClass('active')
			document.querySelector('.main-body').innerHTML = `
				<div class="card-header blog-card-header">
						<h2>Blog Posts</h2>
						<button class="cms-addPost" data-u="logo">Add Post <span class="las la-pen-fancy"></span></button>
				</div>
				<div class="cards blog-cards-container">

				</div>`
			document.querySelector('.cards').innerHTML = ``

			$.ajax({
				type:"GET",
				cache:false,
				url:"api/blogsort?sort="+sortParam,
				processData:false,
				contentType:"application/json",
				data: '',
				success: function(r) {
					r = JSON.parse(r)
					for (i=0; i <r.length; i++ ) {
						document.querySelector('.cards').innerHTML += `	
							<div class="card-single">
								<div>
									<h1>${r[i].title}</h1>
									<div class="card-image">
										<img  src="${r[i].postimg}" />
										<span>posted ${r[i].posted_at}</span>
									</div>
									<span>${substringFunction(r[i].body, 42)}</span>
						
								</div>
								<div class="blog-card-icons">
									<span class="las la-edit" data-editId=${r[i].id} data-type=${sortParam}></span>
									<span class="las la-trash" data-deleteId=${r[i].id} data-type=${sortParam}></span>
								</div>
							</div>`;
					}
				},
				error: function(r) {

				}

			});
			//*********BLOG POSTS END
			
		} else if (type == '2') {
			//*********ORDERS START
			let sortParam = $.urlParam('sort');
			$('[data-tab='+type+']').addClass('active');
			document.querySelector('.main-body').innerHTML = `
			<div class="recent-grid">
				<div class="projects"> 
					<div class="card">
						<div class="card-header">
							<h2>Orders</h2>
						
						</div>
						<div class="card-body">
							<div class="table-responsive">
								<table width="100%">
									<thead>
									<tr>
										<td>Product</td>
										<td>Name</td>
										<td>Price</td>
										<td>Date</td>
									</tr>
									</thead>
									<tbody class="table-data">
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>`;
			document.querySelector('.table-data').innerHTML = ``;
			$.ajax({
				type:"GET",
				cache:false,
				url:"api/blogsort?sort="+sortParam,
				processData:false,
				contentType:"application/json",
				data: '',
				success: function(r) {
					r = JSON.parse(r)
					for (i=0; i <r.length; i++ ) {
						document.querySelector('.table-data').innerHTML += `
									<tr>
										<td>${r[i].order_name}</td>
										<td>${r[i].name} ${r[i].surname}</td>
										<td>R ${r[i].order_price}</td>
										<td>${moment(r[i].order_date).fromNow()}</td>
										
									</tr>`;
					}
				},
				error: function(r) {
					console.log(r)
				}	
						
	 				
			});
			//*********ORDERS END
		} else if (type == '3') {
			//*********PRODUCTS START
			let sortParam = $.urlParam('sort');
			$('[data-tab='+type+']').addClass('active')
			document.querySelector('.main-body').innerHTML = `<div class="recent-grid">
				<div class="projects"> 
				<div class="card">
					<div class="card-header">
						<h2>Products</h2>
						<button class="cms-AddProductText" data-u="add-product">Add Product <span class="las la-pen-fancy"></span></button>
					</div>
					<div class="card-body">
						<div class="table-responsive">
						<table width="100%">
							<thead>
							<tr>
								<td>Product</td>
								<td>Product Price</td>
								<td>Shipping</td>
								<td>Description</td>
								<td>In Stock</td>
								<td>Edit</td>
								<td>Delete</td>
							</tr>
							</thead>
							<tbody class="table-data product-info">
							</tbody>
						</table>
						</div>
					</div>
				</div>
			</div>`
			
			
				
			
			
			document.querySelector('.table-data').innerHTML = ``
			$.ajax({
				type:"GET",
				cache:false,
				url:"api/blogsort?sort="+sortParam,
				processData:false,
				contentType:"application/json",
				data: '',
				success: function(r) {
					r = JSON.parse(r)
					for (i=0; i <r.length; i++ ) {	
						document.querySelector('.table-data').innerHTML += `<tr>
									<td>${r[i].title}</td>
									<td>R ${r[i].price}</td>
									<td>R ${r[i].shipping}</td>
									<td>${substringFunction(r[i].description, 28)}</td>
									<td> 
										<label for="toggle-btn${r[i].id}" class="switch toggle-switch" data-toggleId=${r[i].id} data-type=${sortParam}>
											<input name="toggle-btn${r[i].id}" id="toggle-btn${r[i].id}" class="toggle-btn" data-toggleId=${r[i].id} data-type=${sortParam} type="checkbox" ${r[i].in_stock == 'yes' ? 'checked': ''}/>
											<div class="slider toggle-slider" data-toggleId=${r[i].id} data-type=${sortParam}></div>
										</label>
									</td>
									<td> <i class="las la-edit" data-editId=${r[i].id} data-type=${sortParam}></i></td>
									<td><i class="las la-trash" data-deleteId=${r[i].id} data-type=${sortParam}> </i></td>
								</tr>`;
					}
				},
				error: function(r) {
					console.log(r)
				}
			});
			//*********PRODUCTS END;
		} else if (type == '4') {
			//*********ACCOUNTS START
			let sortParam = $.urlParam('sort');
			$('[data-tab='+type+']').addClass('active')
			document.querySelector('.main-body').innerHTML = `<div class="customers">
				<div class="card">
					<div class="card-header">
						<h3>Accounts</h3>

						

					</div>

					<div class="card-body">
						
					</div>
				</div>
			
			</div>`
			document.querySelector('.card-body').innerHTML = ``;

			$.ajax({
				type:"GET",
				cache:false,
				url:"api/blogsort?sort="+sortParam,
				processData:false,
				contentType:"application/json",
				data: '',
				success: function(r) {
					r = JSON.parse(r)
					for (i=0; i <r.length; i++ ) {
						document.querySelector('.card-body').innerHTML += `
						<div class="customer">
								<div class="info">
								<img src="${r[i].profileimg}" width="40px" height="40px" alt=""/>

								<div>
									<h4>${r[i].firstname} ${r[i].lastname}</h4>
									<h6>${r[i].username}</h6>
									<h6>${r[i].acctype}</h6>
									<small>${r[i].email}</small>
									
								</div>
								
							</div>
						
							<div class="contact">
								<span class="las la-edit" data-editId="${r[i].email}" data-type=${sortParam}></span>
								<span class="las la-trash" data-deleteId="${r[i].email}" data-type=${sortParam}></span>
							</div>
						</div>`;
					}
				},
				error: function(r) {
					console.log(r)
				}
			});
			//*********ACCOUNTS END
		} else if (type == '5') {
			//*********SIGNOUT START
			$('[data-tab='+type+']').addClass('active')
			signoutBtn = document.querySelector('[data-tab'+type+']')
			if (e) {
				if (e.target == signoutBtn) {
					setTimeout(function() {
						window.location.href ="signout";
					},1000)
				}
			} else {
				//*** change paramaters start
				const urlNew = new URLSearchParams(window.location.search);
				urlNew.set('sort', 1)		
				window.history.pushState('{}', null, '?sort='+1+'')
				//*** change paramaters end
				window.location.reload
			}
			 
			
			//*********SIGNOUT END
		}
		//****sort function end
		}
		


	$(document).on('click', 'li [data-tab]', function(e) {
		let tabId = $(this).attr('data-tab');
		$('li [data-tab]').removeClass('active')
		
		
		//*** change paramaters start
		const urlNew = new URLSearchParams(window.location.search);
		urlNew.set('sort', tabId)		
		window.history.pushState('{}', null, '?sort='+tabId+'')
		//*** change paramaters end
		
		
		sortFunction(tabId)
		$("input[name='nav-toggle']").prop('checked', false)
		
	})

})
	
	
	
</script>
</body>
</html>